<!DOCTYPE html>
<html>
<head>
<title>bar plot three.js app</title>
<style>
body {
	margin: 0px;
}
#editor {
     top: 10px;
     z-index = 1;
}
</style>
</head>
<body>
	<div style="position:absolute;">
		<form id = "editor" action="">
		<input id = "h" value = "">
		<input type = "button" name = "submit" onclick = "drawBox()">
		</form>
	</div>
	<div id="container">
	
	
	</div>
	
	<script src="js/three.js"></script>
	<script>
	var container;
	var camera, scene, controls, renderer;
	var geometry, material, mesh;
	var mouseX_i = 0;
	var mouseX_f = 0;
	var mouseY_i = 0;
	var mouseY_f = 0;
	var targetRotationX = 0;
	var targetRotationY = 0;
	var rotationY = 0;
	var rotationX = 0;
	
	init();
	render();
	
	function init() {
		
		scene = new THREE.Scene();

		camera = new THREE.PerspectiveCamera( 50, window.innerWidth/window.innerHeight, 0.1, 10000 );
		camera.position.z = 300;
		
		renderer = new THREE.WebGLRenderer();
		container = document.getElementById("container");
		renderer.setSize( window.innerWidth, window.innerHeight );
		container.appendChild( renderer.domElement );
		
		
		geometry = new THREE.Geometry();
		geometry.vertices.push(new THREE.Vector3( - 50, 0, 0 ) );
		geometry.vertices.push(new THREE.Vector3( 50, 0, 0 ) );
		material = new THREE.LineBasicMaterial( { color: "green", opacity: .2, linewidth: .1 } );
		
		for ( var i = 0; i <= 20; i ++ ) {
		    var line = new THREE.Line( geometry, material );
		    line.position.z = i * 5 - 50;
		    scene.add( line );

		    var line = new THREE.Line( geometry, material );
		    line.position.x = i * 5 - 50;
		    line.rotation.y = 90 * Math.PI / 180;
		    scene.add( line );
		}
		

		geometry = new THREE.PlaneGeometry( 100, 100);
		material = new THREE.MeshBasicMaterial( {color: 0xcccccc, side: THREE.DoubleSide} );
		var plane = new THREE.Mesh( geometry, material );
		plane.rotation.x = 90 * Math.PI / 180;
		plane.position.set(0, 0, 0);
		scene.add( plane );
		
		

		geometry = new THREE.PlaneGeometry( 100, 50 );
		material = new THREE.MeshBasicMaterial( {color: 0xF0F8FF, side: THREE.DoubleSide} );
		var plane = new THREE.Mesh( geometry, material );
		plane.rotation.y = 90 * Math.PI / 180;
		plane.position.set(-50 , 25, 0);
		scene.add( plane );
		
		

		geometry = new THREE.PlaneGeometry( 100, 50 );
		material = new THREE.MeshBasicMaterial( {color: 0xF0F8FF, side: THREE.DoubleSide} );
		var plane = new THREE.Mesh( geometry, material );
		plane.position.set(0, 25, -50);
		scene.add( plane );
		
		container.addEventListener('mousedown', onContainerMouseDown);
		container.addEventListener('wheel', onContainerWheel);
		window.addEventListener('resize', onWindowResize);
	}
	
	function drawBox() {
		var height = document.getElementById("h").value;
		geometry = new THREE.BoxGeometry( 10, height, 10 );
		material = new THREE.MeshBasicMaterial( { color: 0xffff00, transparent : true, opacity : 0.7} );
    	mesh = new THREE.Mesh( geometry, material);
		mesh.position.set(height, height/2, 20);
		scene.add( mesh );
	}
	
	
	// control
	function onWindowResize(event) {
		
		camera.aspect = window.innerWidth/window.innerHeight;
		camera.updateProjectionMatrix();
		
		renderer.setSize(window.innerWidth, window.innerHeight);
	} 
	
	function onContainerWheel(event) {
		event.preventDefault();
		
		var dY = event.deltaY/ 100; 
		camera.position.z = camera.position.z + dY * 10;
	}
	
	function onContainerMouseDown(event) {
		event.preventDefault();
		
		container.addEventListener('mousemove', onContainerMouseMove);
		container.addEventListener('mouseup', onContainerMouseUp);
		container.addEventListener('mouseout', onContainerMouseOut);
		
		mouseX_i = mouseX_f = event.clientX;
		mouseY_i = mouseY_f = event.clientY;	
	}
	
	function onContainerMouseMove(event) {
		mouseX_f = event.clientX;
		mouseY_f = event.clientY;
		var scalerX = Math.PI/window.innerWidth;
		var scalerY = 3*Math.PI/window.innerHeight;
		targetRotationX = (mouseX_f - mouseX_i)*scalerX + rotationY;
        targetRotationY = (mouseY_f - mouseY_i)*scalerY + rotationX;
	}
	
	function onContainerMouseUp(event) {
		container.removeEventListener('mousemove', onContainerMouseMove);
		container.removeEventListener('mouseup', onContainerMouseUp);
		container.removeEventListener('mouseout', onContainerMouseOut);
	}

	function onContainerMouseOut(event) {
		container.removeEventListener('mousemove', onContainerMouseMove);
		container.removeEventListener('mouseup', onContainerMouseUp);
		container.removeEventListener('mouseout', onContainerMouseOut);
	}
	
	
	function render() {

		requestAnimationFrame( render );
	    rotationY += (targetRotationX - rotationY)*0.05;
	    rotationX += (targetRotationY - rotationX)*0.05;
	    scene.rotation.y = rotationY;
	    scene.rotation.x = rotationX;
		renderer.render( scene, camera );
	}

	</script>


</body>
</html>